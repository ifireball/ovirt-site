<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Self-Hosted_Engine_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Migrating_to_a_Self-Hosted_Environment">
	<title>Migrating to a Self-Hosted Environment</title>
	<para>
		To migrate an existing instance of a standard Red Hat Virtualization to a self-hosted engine environment, use the <command>hosted-engine</command> script to assist with the task. The script asks you a series of questions, and configures your environment based on your answers. The Manager from the standard Red Hat Virtualization environment is referred to as the BareMetal-Manager in the following procedure.
	</para>
    <para>
      The RHV-M Virtual Appliance shortens the process by reducing the required user interaction with the Manager virtual machine. However, although the appliance can automate <command>engine-setup</command> in a standard installation, in the migration process <command>engine-setup</command> must be run manually so that you can restore the BareMetal-Manager backup file on the new Manager virtual machine beforehand. 
    </para>
	<para>
		The migration involves the following key actions:
	</para>
	<itemizedlist>
		<listitem>
			<para>
				Run the <command>hosted-engine</command> script to configure the host to be used as a self-hosted engine host and to create a new Red Hat Virtualization virtual machine. 
			</para>
		</listitem>
		<listitem>
			<para>
				Back up the the engine database and configuration files using the <command>engine-backup</command> tool, copy the backup to the new Manager virtual machine, and restore the backup using the <parameter>--mode=restore</parameter> parameter of <command>engine-backup</command>. Run <command>engine-setup</command> to complete the Manager virtual machine configuration. 
			</para>
		</listitem>
<listitem>
			<para>
			Follow the <command>hosted-engine</command> script to complete the setup.
			</para>
		</listitem>
	</itemizedlist>
	<itemizedlist>
		<title>Prerequisites</title>
		<listitem>
			<para>
				Prepare a new host with the <package>ovirt-hosted-engine-setup</package> package installed. See <xref linkend="Deploying_Self-Hosted_Engine_on_RHEL"/> for more information on subscriptions and package installation. The host must be a supported version of the current Red Hat Virtualization environment.  
                <note>
                  <para>
                      If you intend to use an existing host, place the host in maintenance and remove it from the existing environment. See <ulink url="https://access.redhat.com/documentation/en/red-hat-virtualization/4.0/single/administration-guide/#sect-Host_Tasks">Removing a Host</ulink> in the <citetitle>Administration Guide</citetitle> for more information.
                  </para>
                </note>
			</para>
		</listitem>
		<listitem>
			<para>
				Obtain the RHV-M Virtual Appliance by installing the <package>rhevm-appliance</package> package. The RHV-M Virtual Appliance is always based on the latest supported Manager version. Ensure the Manager version in your current environment is updated to the latest supported Y-stream version as the Manager version needs to be the same for the migration. 
			</para>
		</listitem>
        <listitem>
            <para>
                To use the RHV-M Virtual Appliance for the Manager installation, ensure one directory is at least 60 GB. The <command>hosted-engine</command> script first checks if <filename>/var/tmp</filename> has enough space to extract the appliance files. If not, you can specify a different directory or mount external storage. The VDSM user and KVM group must have read, write, and execute permissions on the directory.
            </para>
        </listitem>
		<listitem>
			<para>
				The fully qualified domain name of the new Manager must be the same fully qualified domain name as that of the BareMetal-Manager. Forward and reverse lookup records must both be set in DNS.
			</para>
		</listitem>
		<listitem>
			<para>
				You must have access and can make changes to the BareMetal-Manager.
			</para>
		</listitem>
		<listitem>
			<para>
				The virtual machine to which the BareMetal-Manager is being migrated must have the same amount of RAM as the physical machine from which the BareMetal-Manager is being migrated. If you must migrate to a virtual machine that has less RAM than the physical machine from which the BareMetal-Manager is migrated, see the following Red Hat Knowledgebase article: <ulink url="https://access.redhat.com/articles/2705841"/>.
			</para>
		</listitem>
	</itemizedlist>
	<procedure>
		<title>Migrating to a Self-Hosted Environment</title>
		<step>
			<title>Initiating a Self-Hosted Engine Deployment</title>
			<note>
				<para>
					If you are updating from version 3.5 or earlier, you must run the command <command>hosted-engine --deploy --config-append=/etc/ovirt-hosted-engine/answers.conf</command>. The file <filename>answers.conf</filename> must contain the parameter <literal>OVEHOSTED_NETWORK/bridgeName=str:rhevm</literal>. Upgrading from version 3.5 to version 3.6 or later causes the default management network to be non-operational unless this parameter is set.
				</para>
			</note>

			<para>
				Run the <command>hosted-engine</command> script. To escape the script at any time, use the <keycombo action="simul"><keycap>CTRL</keycap><keycap>D</keycap></keycombo> keyboard combination to abort deployment. It is recommended to use the <command>screen</command> window manager to run the script to avoid losing the session in case of network or terminal disruption. If not already installed, install the <package>screen</package> package, which is available in the standard Red Hat Enterprise Linux repository. 
			</para>
			<screen># yum install screen</screen>
            <screen># screen</screen>
            <screen># hosted-engine --deploy</screen>
			<note>
				<para>
					In the event of session timeout or connection disruption, run <command>screen -d -r</command> to recover the <command>hosted-engine</command> deployment session.
				</para>
			</note>
		</step>
		<step>
			<title>Configuring Storage</title>
			<para>
				Select the type of storage to use.
			</para>
			<screen>During customization use CTRL-D to abort.
Please specify the storage you would like to use (glusterfs, iscsi, fc, nfs3, nfs4)[nfs3]:</screen>
			<stepalternatives>
				<step>
					<para>
						For NFS storage types, specify the full address, using either the FQDN or IP address, and path name of the shared storage domain.
					</para>
					<screen>Please specify the full shared storage connection path to use (example: host:/path): <replaceable>storage.example.com:/hosted_engine/nfs</replaceable></screen>
				</step>
				<step>
					<para>
						For iSCSI, specify the iSCSI portal IP address, port, user name and password, and select a target name from the auto-detected list. You can only select one iSCSI target during the deployment.
					</para>
					<screen>Please specify the iSCSI portal IP address:           
Please specify the iSCSI portal port [3260]:           
Please specify the iSCSI portal user:           
Please specify the iSCSI portal password:
Please specify the target name (<replaceable>auto-detected values</replaceable>) [<replaceable>default</replaceable>]:</screen>
				</step>
				<step>
					<para>
						For Gluster storage, specify the full address, using either the FQDN or IP address, and path name of the shared storage domain. 
						<important>
							<para>
								Only replica 3 Gluster storage is supported. Ensure the following configuration has been made: 
								<itemizedlist>
									<listitem>
										<para>
											In the <filename>/etc/glusterfs/glusterd.vol</filename> file on all three Gluster servers, set <literal>rpc-auth-allow-insecure</literal> to <literal>on</literal>.
										</para>
										<screen>option rpc-auth-allow-insecure on</screen>
									</listitem>
									<listitem>
										<para>
											Configure the volume as follows:
										</para>
										<screen>gluster volume set <replaceable>volume</replaceable> cluster.quorum-type auto
gluster volume set <replaceable>volume</replaceable> network.ping-timeout 10
gluster volume set <replaceable>volume</replaceable> auth.allow \*
gluster volume set <replaceable>volume</replaceable> group virt
gluster volume set <replaceable>volume</replaceable> storage.owner-uid 36
gluster volume set <replaceable>volume</replaceable> storage.owner-gid 36
gluster volume set <replaceable>volume</replaceable> server.allow-insecure on</screen>
									</listitem>
								</itemizedlist>
							</para>
						</important>
					</para>
					<screen>Please specify the full shared storage connection path to use (example: host:/path): <replaceable>storage.example.com:/hosted_engine/gluster_volume</replaceable></screen>
				</step>
				<step>
					<para>
						For Fibre Channel, the host bus adapters must be configured and connected, and the <command>hosted-engine</command> script will auto-detect the LUNs available. The LUNs must not contain any existing data. <!--It must support multipathing. -->
					</para>
					<screen>The following luns have been found on the requested target:
[1]     3514f0c5447600351       30GiB   XtremIO XtremApp
                        status: used, paths: 2 active
          
[2]     3514f0c5447600352       30GiB   XtremIO XtremApp
                        status: used, paths: 2 active

Please select the destination LUN (1, 2) [1]: </screen>
				</step>
			</stepalternatives>
		</step>
		<step>
			<title>Configuring the Network</title>
			<para>
				The script detects possible network interface controllers (NICs) to use as a management bridge for the environment. It then checks your firewall configuration and offers to modify it for console (SPICE or VNC) access HostedEngine-VM. Provide a pingable gateway IP address, to be used by the <literal>ovirt-ha-agent</literal> to help determine a host's suitability for running HostedEngine-VM.
			</para>
			<screen>Please indicate a nic to set rhvm bridge on: (eth1, eth0) [eth1]:
iptables was detected on your computer, do you wish setup to configure it? (Yes, No)[Yes]: 
Please indicate a pingable gateway IP address [X.X.X.X]: </screen>
		</step>
		<step>
			<title>Configuring the Virtual Machine</title>
			<para>
				The script creates a virtual machine to be configured as the Red Hat Virtualization Manager, referred to in this procedure as HostedEngine-VM. Select <guimenuitem>disk</guimenuitem> for the boot device type, and the script will automatically detect the RHV-M Appliances available. Select an appliance.
			</para>
			<screen>         Please specify the device to boot the VM from (choose disk for the oVirt engine appliance) 
         (cdrom, disk, pxe) [disk]: 
         Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: <replaceable>vnc</replaceable>
[ INFO ] Detecting available oVirt engine appliances
         The following appliance have been found on your system:
               [1] - The oVirt Engine Appliance image (OVA)
               [2] - Directly select an OVA file
         Please select an appliance (1, 2) [1]:
[ INFO ] Checking OVF archive content (could take a few minutes depending on archive size)</screen>
			<para>
				Specify <literal>Yes</literal> if you want cloud-init to take care of the initial configuration of the Manager virtual machine. Specify <guimenuitem>Generate</guimenuitem> for cloud-init to take care of tasks like setting the root password, configuring networking, and configuring the host name. Optionally, select <guimenuitem>Existing</guimenuitem> if you have an existing cloud-init script to take care of more sophisticated functions of cloud-init. Specify the FQDN for the Manager virtual machine. This must be the same FQDN provided for the BareMetal-Manager.
			</para>
			<note>
				<para>
					For more information on cloud-init, see <ulink url="https://cloudinit.readthedocs.org/en/latest/" />.
				</para>
			</note>
			<screen>Would you like to use cloud-init to customize the appliance on the first boot (Yes, No)[Yes]? <replaceable>Yes</replaceable>
Would you like to generate on-fly a cloud-init no-cloud ISO image or do you have an existing one(Generate, Existing)[Generate]? <replaceable>Generate</replaceable>
Please provide the FQDN you would like to use for the engine appliance.
Note: This will be the FQDN of the engine VM you are now going to launch.
It should not point to the base host or to any other existing machine.
Engine VM FQDN: (leave it empty to skip): <replaceable>manager.example.com</replaceable></screen>
            <para>
              You must answer <literal>No</literal> to the following question so that you can restore the BareMetal-Manager backup file on HostedEngine-VM before running <command>engine-setup</command>.
            </para>
<screen>Automatically execute engine-setup on the engine appliance on first boot (Yes, No)[Yes]? <replaceable>No</replaceable></screen>
            <para>
              Configure the Manager domain name, root password, networking, hardware, and console access details.
            </para>
<screen>Enter root password that will be used for the engine appliance (leave it empty to skip): <replaceable>p@ssw0rd</replaceable>
Confirm appliance root password: <replaceable>p@ssw0rd</replaceable>
The following CPU types are supported by this host:
    - model_Penryn: Intel Penryn Family
    - model_Conroe: Intel Conroe Family
Please specify the CPU type to be used by the VM [model_Penryn]: 
Please specify the number of virtual CPUs for the VM [Defaults to appliance OVF value: 4]: 
You may specify a MAC address for the VM or accept a randomly generated default [00:16:3e:77:b2:a4]: 
How should the engine VM network be configured (DHCP, Static)[DHCP]? <replaceable>Static</replaceable>
Please enter the IP address to be used for the engine VM: <replaceable>192.168.x.x</replaceable>
Please provide a comma-separated list (max3) of IP addresses of domain name servers for the engine VM
Engine VM DNS (leave it empty to skip):
Add lines for the appliance itself and for this host to /etc/hosts on the engine VM?
Note: ensuring that this host could resolve the engine VM hostname is still up to you (Yes, No)[No] <replaceable>Yes</replaceable></screen>
		</step>
		<step>
			<title>Configuring the Self-Hosted Engine</title>
			<para>
				Specify the name for Host-HE1 to be identified in the Red Hat Virtualization environment, and the password for the <literal>admin@internal</literal> user to access the Administration Portal. Finally, provide the name and TCP port number of the SMTP server, the email address used to send email notifications, and a comma-separated list of email addresses to receive these notifications.
			</para>
			<screen>Enter engine admin password: <replaceable>p@ssw0rd</replaceable>
Confirm engine admin password: <replaceable>p@ssw0rd</replaceable>
Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:
Please provide the FQDN for the engine you would like to use.
          This needs to match the FQDN that you will use for the engine installation within the VM.
          Note: This will be the FQDN of the VM you are now going to create,
          it should not point to the base host or to any other existing machine.
          Engine FQDN:  []: <replaceable>manager.example.com</replaceable>
Please provide the name of the SMTP server through which we will send notifications [localhost]: 
Please provide the TCP port number of the SMTP server [25]: 
Please provide the email address from which notifications will be sent [root@localhost]: 
Please provide a comma-separated list of email addresses which will get notifications [root@localhost]:</screen>
		</step>
		<step>
			<title>Configuration Preview</title>
			<para>
				Before proceeding, the <command>hosted-engine</command> script displays the configuration values you have entered, and prompts for confirmation to proceed with these values.
			</para>
            <screen>Bridge interface                 : eth1
Engine FQDN                      : <replaceable>manager.example.com</replaceable>
Bridge name                      : ovirtmgmt
Host address                     : <replaceable>host.example.com</replaceable>
SSH daemon port                  : 22
Firewall manager                 : iptables
Gateway address                  : <replaceable>X.X.X.X</replaceable>
Host name for web application    : Host-HE1
Host ID                          : 1
Image size GB                    : 50
Storage connection               : <replaceable>storage.example.com:/hosted_engine/nfs</replaceable>
Console type                     : vnc
Memory size MB                   : 4096
MAC address                      : 00:16:3e:77:b2:a4
Boot type                        : pxe
Number of CPUs                   : 2
CPU Type                         : model_Penryn

Please confirm installation settings (Yes, No)[Yes]:</screen>
		</step>
		<step>
          <title>Creating HostedEngine-VM</title>
			<para>
              The script creates the virtual machine to be configured as HostedEngine-VM and provides connection details. You must manually run <command>engine-setup</command> after restoring the backup file on HostedEngine-VM before the <command>hosted-engine</command> script can proceed on Host-HE1.
			</para>
			<screen>[ INFO  ] Stage: Transaction setup
...
[ INFO  ] Creating VM
          You can now connect to the VM with the following command:
                  /bin/remote-viewer vnc://localhost:5900
          Use temporary password "3463VnKn" to connect to vnc console.
          Please note that in order to use remote-viewer you need to be able to run graphical applications.
          This means that if you are using ssh you have to supply the -Y flag (enables trusted X11 forwarding).
          Otherwise you can run the command from a terminal in your preferred desktop environment.
          If you cannot run graphical applications you can connect to the graphic console from another host or connect to the serial console using the following command:
          socat UNIX-CONNECT:/var/run/ovirt-vmconsole-console/8f74b589-8c6f-4a32-9adf-6e615b69de07.sock,user=ovirt-vmconsole STDIO,raw,echo=0,escape=1
          Please ensure that your Guest OS is properly configured to support serial console according to your distro documentation.
          Follow http://www.ovirt.org/Serial_Console_Setup#I_need_to_access_the_console_the_old_way for more info.
          If you need to reboot the VM you will need to start it manually using the command:
          hosted-engine --vm-start
          You can then set a temporary password using the command:
          hosted-engine --add-console-password
          Please install and setup the engine in the VM.
          You may also be interested in subscribing to "agent" RHN/Satellite channel and installing rhevm-guest-agent-common package in the VM.
        
        
          The VM has been rebooted.
          To continue please install oVirt-Engine in the VM
          (Follow http://www.ovirt.org/Quick_Start_Guide for more info).
        
          Make a selection from the options below:
          (1) Continue setup - oVirt-Engine installation is ready and ovirt-engine service is up
          (2) Abort setup
          (3) Power off and restart the VM
          (4) Destroy VM and abort setup
        
          (1, 2, 3, 4)[1]:</screen>
			<para>
				Connect to the virtual machine using the VNC protocol with the following command. Replace FQDN with the fully qualified domain name or the IP address of the self-hosted engine host. 
				<screen># /bin/remote-viewer vnc://<replaceable>FQDN</replaceable>:5900</screen>
			</para>
		</step>
        <!--NEW_MANAGER-->
        <step>
			<title>Enabling SSH on HostedEngine-VM</title>
			<para>
				SSH password authentication is not enabled by default on the RHV-M Virtual Appliance. Connect to HostedEngine-VM via VNC and enable SSH password authentication so that you can access the virtual machine via SSH later to restore the BareMetal-Manager backup file and configure the new Manager. Verify that the <command>sshd</command> service is running. Edit <filename>/etc/ssh/sshd_config</filename> and change the following two options to <literal>yes</literal>: 
                <screen>[...]
PermitRootLogin yes       
[...]
PasswordAuthentication yes</screen>
            </para>
            <para>
              Restart the <literal>sshd</literal> service for the changes to take effect. 
              <screen># systemctl restart sshd.service</screen>
            </para>
		</step>
		<!--OLD MANAGER-->
		<step>
			<title>Disabling BareMetal-Manager</title>
			<para>
				Connect to BareMetal-Manager, the Manager of your established Red Hat Virtualization environment, and stop the engine and prevent it from running.
			</para>
			<screen># systemctl stop ovirt-engine.service
# systemctl disable ovirt-engine.service</screen>
			<note>
				<para>
					Though stopping BareMetal-Manager from running is not obligatory, it is recommended as it ensures no changes will be made to the environment after the backup has been created. Additionally, it prevents BareMetal-Manager and HostedEngine-VM from simultaneously managing existing resources.
				</para>
			</note>
		</step>
		<step>
			<title>Updating DNS</title>
			<para>
				Update your DNS so that the FQDN of the Red Hat Virtualization environment correlates to the IP address of HostedEngine-VM and the FQDN previously provided when configuring the <command>hosted-engine</command> deployment script on Host-HE1. In this procedure, FQDN was set as <replaceable>manager.example.com</replaceable> because in a migrated hosted-engine setup, the FQDN provided for the engine must be identical to that given in the engine setup of the original engine.
			</para>
		</step>
		<step>
			<title>Creating a Backup of BareMetal-Manager</title>
			<para>
				Connect to BareMetal-Manager and run the <command>engine-backup</command> command with the <parameter>--mode=backup</parameter>, <parameter>--file=<replaceable>FILE</replaceable></parameter>, and <parameter>--log=<replaceable>LogFILE</replaceable></parameter> parameters to specify the backup mode, the name of the backup file created and used for the backup, and the name of the log file to be created to store the backup log.
			</para>
			<screen># engine-backup --mode=backup --file=<replaceable>FILE</replaceable> --log=<replaceable>LogFILE</replaceable></screen>
		</step>
		<step>
			<title>Copying the Backup File to HostedEngine-VM</title>
			<para>
				On BareMetal-Manager, secure copy the backup file to HostedEngine-VM. In the following example, <replaceable>manager.example.com</replaceable> is the FQDN for HostedEngine-VM, and <replaceable>/backup/</replaceable> is any designated folder or path. If the designated folder or path does not exist, you must connect to HostedEngine-VM and create it before secure copying the backup from BareMetal-Manager.
			</para>
			<screen># scp -p <replaceable>FILE</replaceable> <replaceable>LogFILE</replaceable> <replaceable>manager.example.com:/backup/</replaceable></screen>
		</step> 
		<!--NEW_MANAGER-->
		<step>
			<title>Restoring the Backup File on HostedEngine-VM</title>
			<para>
              Use the <command>engine-backup</command> tool to restore a complete backup. If you configured the BareMetal-Manager database(s) manually during <command>engine-setup</command>, follow the instructions at <xref linkend="Restoring_the_Self-Hosted_Engine_Manager_Manually" /> to restore the backup environment manually.
			</para>
      <stepalternatives>
       <step>
          <para>If you are only restoring the Manager, run:</para>
					<screen># engine-backup --mode=restore --file=<replaceable>file_name</replaceable> --log=<replaceable>log_file_name</replaceable> --provision-db --restore-permissions</screen>
      </step>
       <step>
					<para>
						If you are restoring the Manager and Data Warehouse, run:</para>
						<screen># engine-backup --mode=restore --file=<replaceable>file_name</replaceable> --log=<replaceable>log_file_name</replaceable> --provision-db --provision-dwh-db --restore-permissions</screen>
       </step>
    </stepalternatives>
			<para>
				If successful, the following output displays:
			</para>
			<screen>You should now run engine-setup.
Done.</screen>
		</step>
		<step>
          <title>Configuring HostedEngine-VM</title>
			<para>
				Configure the restored Manager virtual machine. This process identifies the existing configuration settings and database content. Confirm the settings. Upon completion, the setup provides an SSH fingerprint and an internal Certificate Authority hash.
			</para>
			<screen># engine-setup</screen>
			<screen>
[ INFO  ] Stage: Initializing
[ INFO  ] Stage: Environment setup
Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging.conf', '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf']
Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20140304075238.log
Version: otopi-1.1.2 (otopi-1.1.2-1.el6ev)
[ INFO  ] Stage: Environment packages setup
[ INFO  ] Yum Downloading: rhel-65-zstream/primary_db 2.8 M(70%)
[ INFO  ] Stage: Programs detection
[ INFO  ] Stage: Environment setup
[ INFO  ] Stage: Environment customization
         
          --== PACKAGES ==--
         
[ INFO  ] Checking for product updates...
[ INFO  ] No product updates found
         
          --== NETWORK CONFIGURATION ==--
         
Setup can automatically configure the firewall on this system.
Note: automatic configuration of the firewall may overwrite current settings.
Do you want Setup to configure the firewall? (Yes, No) [Yes]: 
[ INFO  ] iptables will be configured as firewall manager.
         
          --== DATABASE CONFIGURATION ==--
         
         
          --== OVIRT ENGINE CONFIGURATION ==--
         
         
          --== PKI CONFIGURATION ==--
         
         
          --== APACHE CONFIGURATION ==--
         
         
          --== SYSTEM CONFIGURATION ==--
         
         
          --== END OF CONFIGURATION ==--
         
[ INFO  ] Stage: Setup validation
[ INFO  ] Cleaning stale zombie tasks
         
          --== CONFIGURATION PREVIEW ==--
         
          Default SAN wipe after delete           : False
          Firewall manager                        : iptables
          Update Firewall                         : True
          Host FQDN                               : <replaceable>manager.example.com</replaceable>
          Engine database secured connection      : False
          Engine database host                    : <replaceable>X.X.X.X</replaceable>
          Engine database user name               : engine
          Engine database name                    : <replaceable>engine</replaceable>
          Engine database port                    : 5432
          Engine database host name validation    : False
          Engine installation                     : True
          PKI organization                        : <replaceable>example.com</replaceable>
          NFS mount point                         : /var/lib/exports/iso
          Configure VMConsole Proxy               : True
          Engine Host FQDN                        : <replaceable>manager.example.com</replaceable>
          Configure WebSocket Proxy               : True
         
          Please confirm installation settings (OK, Cancel) [OK]: </screen>
		</step>
		<!--Host-HE1-->
		<step>
			<title>Synchronizing the Host and the Manager</title>
			<para>
				Return to Host-HE1 and continue the <command>hosted-engine</command> deployment script by selecting option 1: 
				<screen>(1) Continue setup - oVirt-Engine installation is ready and ovirt-engine service is up</screen>
			</para>
            <para>
            The script displays the internal Certificate Authority hash, and prompts you to select the cluster to which to add Host-HE1.
			<screen>[ INFO  ] Engine replied: DB Up!Welcome to Health Status!
[ INFO  ] Acquiring internal CA cert from the engine
[ INFO  ] The following CA certificate is going to be used, please immediately interrupt if not correct:
[ INFO  ] Issuer: C=<replaceable>US</replaceable>, O=<replaceable>example.com</replaceable>, CN=<replaceable>manager.example.com</replaceable>.23240, Subject: C=<replaceable>US</replaceable>, O=<replaceable>example.com</replaceable>, CN=<replaceable>manager.example.com</replaceable>.23240, Fingerprint (SHA-1): <replaceable>XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</replaceable>
[ INFO  ] Connecting to the Engine
          Enter the name of the cluster to which you want to add the host (DB1, DB2, Default) [Default]:
[ INFO  ] Waiting for the host to become operational in the engine. This may take several minutes...
[ INFO  ] The VDSM Host is now operational
[ INFO  ] Saving hosted-engine configuration on the shared storage domain
          Please shutdown the VM allowing the system to launch it as a monitored service.
          The system will wait until the VM is down.</screen>
          </para>
		</step> 
        <step>
			<title>Shutting Down HostedEngine-VM</title>
			<para>
				Shut down HostedEngine-VM.
			</para>
			<screen># shutdown -h now</screen>
		</step>
		<step>
			<title>Setup Confirmation</title>
			<para>
              Return to Host-HE1 to confirm it has detected that HostedEngine-VM is down.
			</para>
			<screen>[ INFO  ] Enabling and starting HA services
[ INFO  ] Stage: Clean up
[ INFO  ] Generating answer file '/var/lib/ovirt-hosted-engine-setup/answers/answers-20160509162843.conf'
[ INFO  ] Generating answer file '/etc/ovirt-hosted-engine/answers.conf'
[ INFO  ] Stage: Pre-termination
[ INFO  ] Stage: Termination
[ INFO  ] Hosted Engine successfully set up</screen>
		</step>
	</procedure>
	<para>
		Your Red Hat Virtualization engine has been migrated to a self-hosted engine setup. The Manager is now operating on a virtual machine on Host-HE1, called HostedEngine-VM in the environment. As HostedEngine-VM is highly available, it is migrated to other hosts in the environment when applicable.
	</para>
</section>
