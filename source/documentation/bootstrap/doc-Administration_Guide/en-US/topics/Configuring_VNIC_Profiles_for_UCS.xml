<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Configuring_VNIC_Profiles_for_UCS">
	<title>Configuring vNIC Profiles for UCS Integration</title>
	<para>
		 Cisco's Unified Computing System (UCS) is used to manage datacenter aspects such as computing, networking and storage resources.
	</para>
	<para>
       The <literal>vdsm-hook-vmfex-dev</literal> hook allows virtual machines to connect to Cisco's UCS-defined port profiles by configuring the vNIC profile. The UCS-defined port profiles contain the properties and settings used to configure virtual interfaces in UCS. The <literal>vdsm-hook-vmfex-dev</literal> hook is installed by default with VDSM. See <xref linkend="appe-VDSM_and_Hooks"/> for more information. 
	</para>
	<para>
	    When a virtual machine that uses the vNIC profile is created, it will use the Cisco vNIC.
	</para>
   <para>
       The procedure to configure the vNIC profile for UCS integration involves first configuring a custom device property. When configuring the custom device property, any existing value it contained is overwritten. When combining new and existing custom properties, include all of the custom properties in the command used to set the key's value. Multiple custom properties are separated by a semi-colon.
   </para>
   <note>
      <para>
         A UCS port profile must be configured in Cisco UCS before configuring the vNIC profile. 
      </para>
   </note>
	<procedure>
		<title>Configuring the Custom Device Property</title>
		<step>
			<para>
				 On the Red Hat Virtualization Manager, configure the <literal>vmfex</literal> custom property and set the cluster compatibility level using <literal>--cver</literal>.
			</para>
			<screen>
# engine-config -s CustomDeviceProperties='{type=interface;prop={vmfex=^[a-zA-Z0-9_.-]{2,32}$}}' --cver=3.6
			</screen>
		</step>
		<step>
			<para>
				 Verify that the <literal>vmfex</literal> custom device property was added.
			</para>
			<screen>
# engine-config -g CustomDeviceProperties			
			</screen>
		</step>
		<step>
			<para>
				 Restart the engine.
			</para>
			<screen>
# systemctl restart ovirt-engine.service
			</screen>
		</step>
	</procedure>
	<para>
	    The vNIC profile to configure can belong to a new or existing logical network. See <xref linkend="Creating_a_new_logical_network_in_a_data_center_or_cluster"/> for instructions to configure a new logical network.
	</para>
	<procedure>
	    <title>Configuring a vNIC Profile for UCS Integration</title>
		<step>
			<para>
				Click the <guilabel>Networks</guilabel> resource tab, and select a logical network in the results list.
			</para>
		</step>
		<step>
			<para>
				Select the <guilabel>vNIC Profiles</guilabel> tab in the details pane. If you selected the logical network in tree mode, you can select the <guilabel>vNIC Profiles</guilabel> tab in the results list.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>New</guibutton> or <guibutton>Edit</guibutton> to open the <guilabel>VM Interface Profile</guilabel> window.
			</para>
		</step>
		<step>
			<para>
				Enter the <guilabel>Name</guilabel> and <guilabel>Description</guilabel> of the profile.
			</para>
		</step>
		<step>
        <para>
           Select the <literal>vmfex</literal> custom property from the custom properties list and enter the UCS port profile name.
        </para>
    </step>
    		<step>
        <para>
           Click <guibutton>OK</guibutton>.
        </para>
    </step>
</procedure>


</section>
