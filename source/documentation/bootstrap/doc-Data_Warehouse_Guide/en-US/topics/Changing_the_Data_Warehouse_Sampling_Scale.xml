<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Data_Warehouse_Guide.ent">
%BOOK_ENTITIES;
]>

<section id="Changing_the_Data_Warehouse_Sampling_Scale">
  <title>Changing the Data Warehouse Sampling Scale</title>
  <para>
    Data Warehouse is required in Red Hat Virtualization. It can be installed and configured on the same machine as the Manager, or on a separate machine with access to the Manager. The default data retention settings may not be required for all setups, so <command>engine-setup</command> offers two data sampling scales: <literal>Basic</literal> and <literal>Full</literal>.
    <itemizedlist>
        <listitem>
          <para>
            <literal>Full</literal> uses the default values for the data retention settings listed in <xref linkend="Application_Settings_for_the_Data_Warehouse_service_in_ovirt-engine-dwhd.conf"/> (recommended when Data Warehouse is installed on a remote host).
          </para>
        </listitem>
        <listitem>
          <para>
            <literal>Basic</literal> reduces the values of <literal>DWH_TABLES_KEEP_HOURLY</literal> to <literal>720</literal> and <literal>DWH_TABLES_KEEP_DAILY</literal> to <literal>0</literal>, easing the load on the Manager machine (recommended when the Manager and Data Warehouse are installed on the same machine). 
          </para>
        </listitem>
    </itemizedlist>  
    The sampling scale is configured by <command>engine-setup</command> during installation:
  </para>
  <screen>--== MISC CONFIGURATION ==--
         
Please choose Data Warehouse sampling scale:
(1) Basic
(2) Full
(1, 2)[1]:</screen>
  <para>
    You can change the sampling scale later by running <command>engine-setup</command> again with the <command>--reconfigure-dwh-scale</command> option. 
  </para>
  <example>
    <title>Changing the Data Warehouse Sampling Scale</title>
<screen># engine-setup --reconfigure-dwh-scale
[...]
Welcome to the RHEV 4.0 setup/upgrade.
Please read the RHEV 4.0 install guide
https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Virtualization/4.0/html/Installation_Guide/index.html.
Please refer to the RHEV Upgrade Helper application
https://access.redhat.com/labs/rhevupgradehelper/ which will guide you in the upgrading process.
Would you like to proceed? (Yes, No) [Yes]: 
[...]
Setup can automatically configure the firewall on this system.
Note: automatic configuration of the firewall may overwrite current settings.
Do you want Setup to configure the firewall? (Yes, No) [Yes]:
[...]
Setup can backup the existing database. The time and space required for the database backup depend on its size. This process takes time, and in some cases (for instance, when the size is few GBs) may take several hours to complete.
If you choose to not back up the database, and Setup later fails for some reason, it will not be able to restore the database and all DWH data will be lost.
Would you like to backup the existing database before upgrading it? (Yes, No) [Yes]: 
[...]
Please choose Data Warehouse sampling scale:
(1) Basic
(2) Full
(1, 2)[1]: 2
[...]
During execution engine service will be stopped (OK, Cancel) [OK]: 
[...]
Please confirm installation settings (OK, Cancel) [OK]:</screen>
  </example>
  <para>
    You can also adjust individual data retention settings if necessary, as documented in <xref linkend="Application_Settings_for_the_Data_Warehouse_service_in_ovirt-engine-dwhd.conf"/>.
  </para>
</section>