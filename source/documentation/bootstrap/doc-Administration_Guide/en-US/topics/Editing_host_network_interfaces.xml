<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Editing_host_network_interfaces">
	<title>Editing Host Network Interfaces and Assigning Logical Networks to Hosts</title>
	<para>
		You can change the settings of physical host network interfaces, move the management network from one physical host network interface to another, and assign logical networks to physical host network interfaces. Bridge and ethtool custom properties are also supported.
	</para>
	<important>
		<para>
			You cannot assign logical networks offered by external providers to physical host network interfaces; such networks are dynamically assigned to hosts as they are required by virtual machines.
		</para>
	</important>
	<procedure>
		<title>Editing Host Network Interfaces and Assigning Logical Networks to Hosts</title>
		<step>
			<para>
				Click the <guilabel>Hosts</guilabel> resource tab, and select the desired host.
			</para>
		</step>
		<step>
			<para>
				Click the <guilabel>Network Interfaces</guilabel> tab in the details pane.
			</para>
		</step>
		<step>
			<para>
				Click the <guibutton>Setup Host Networks</guibutton> button to open the <guilabel>Setup Host Networks</guilabel> window.
			</para>
		</step>
		<step>
			<para>
				Attach a logical network to a physical host network interface by selecting and dragging the logical network into the <guilabel>Assigned Logical Networks</guilabel> area next to the physical host network interface.
			</para>
			<para>
				Alternatively, right-click the logical network and select a network interface from the drop-down menu.
			</para>
		</step>
		<step>
			<para>
				Configure the logical network:
			</para>
			<substeps>
				<step>
					<para>
						Hover your cursor over an assigned logical network and click the pencil icon to open the <guilabel>Edit Management Network</guilabel> window.
					</para>
				</step>
				<step>
					<para>
						Select a <guilabel>Boot Protocol</guilabel> from <guilabel>None</guilabel>, <guilabel>DHCP</guilabel>, or <guilabel>Static</guilabel>. If you selected <guilabel>Static</guilabel>, enter the <guilabel>IP</guilabel>, <guilabel>Netmask / Routing Prefix</guilabel>, and the <guilabel>Gateway</guilabel>.
					</para>
					<note>
					   <para>
					      Each logical network can have a separate gateway defined from the management network gateway. This ensures traffic that arrives on the logical network will be forwarded using the logical network's gateway instead of the default gateway used by the management network.
					   </para>
					</note>
				</step>
                                <step>
                                    <para>
                                        To override the default host network quality of service, select <guilabel>Override QoS</guilabel> and enter the desired values in the following fields:
                                    </para>
                                    <para>
                                        <itemizedlist>
							<listitem>
								<para>
									<guilabel>Weighted Share</guilabel>: Signifies how much of the logical link's capacity a specific network should be allocated, relative to the other networks attached to the same logical link. The exact share depends on the sum of shares of all networks on that link. By default this is a number in the range 1-100.
								</para>
							</listitem>
							<listitem>
								<para>
									<guilabel>Rate Limit [Mbps]</guilabel>: The maximum bandwidth to be used by a network.
								</para>
							</listitem>
							<listitem>
								<para>
									<guilabel>Committed Rate [Mbps]</guilabel>: The minimum bandwidth required by a network. The Committed Rate requested is not guaranteed and will vary depending on the network infrastructure and the Committed Rate requested by other networks on the same logical link.
								</para>
							</listitem>
						</itemizedlist>
                                    </para>
                                    <para>
                                        For more information on configuring host network quality of service see <xref linkend="sect-Host_Network_Quality_of_Service" />
                                    </para>
                                </step>
				<step>
					<para>
						To configure a network bridge, click the <guilabel>Custom Properties</guilabel> tab and select <guimenuitem>bridge_opts</guimenuitem> from the drop-down list. Enter a valid key and value with the following syntax: <replaceable>key</replaceable>=<replaceable>value</replaceable>. Separate multiple entries with a whitespace character. The following keys are valid, with the values provided as examples. For more information on these parameters, see <xref linkend="Explanation_of_bridge_opts_Parameters" />.
						<screen>forward_delay=1500
gc_timer=3765
group_addr=1:80:c2:0:0:0
group_fwd_mask=0x0
hash_elasticity=4
hash_max=512
hello_time=200
hello_timer=70
max_age=2000
multicast_last_member_count=2
multicast_last_member_interval=100
multicast_membership_interval=26000
multicast_querier=0
multicast_querier_interval=25500
multicast_query_interval=13000
multicast_query_response_interval=1000
multicast_query_use_ifaddr=0
multicast_router=1
multicast_snooping=1
multicast_startup_query_count=2
multicast_startup_query_interval=3125</screen>
					</para>
				</step>
        <step>
          <para>
            To configure ethtool properties, click the <guilabel>Custom Properties</guilabel> tab and select <guimenuitem>ethtool_opts</guimenuitem> from the drop-down list. Enter a valid key and value with the following syntax: <replaceable>key</replaceable>=<replaceable>value</replaceable>. Separate multiple entries with a whitespace character. The <guimenuitem>ethtool_opts</guimenuitem> option is not available by default; you need to add it using the engine configuration tool. See <xref linkend="How_to_Set_Up_Red_Hat_Enterprise_Virtualization_Manager_to_Use_Ethtool" /> for more information. See the manual page for more information on ethtool properties.
          </para>
        </step>
				<step>
          <para>
            To configure Fibre Channel over Ethernet (FCoE), click the <guilabel>Custom Properties</guilabel> tab and select <guimenuitem>fcoe</guimenuitem> from the drop-down list. Enter a valid key and value with the following syntax: <replaceable>key</replaceable>=<replaceable>value</replaceable>. At least <literal>enable=yes</literal> is required. You can also add <literal>dcb=<option>[yes|no]</option></literal> and <literal>auto_vlan=<option>[yes|no]</option></literal>. Separate multiple entries with a whitespace character. The <guimenuitem>fcoe</guimenuitem> option is not available by default; you need to add it using the engine configuration tool. See <xref linkend="How_to_Set_Up_RHVM_to_Use_FCoE" /> for more information. 
          </para>
					<note>
					  <para>
					    A separate, dedicated logical network is recommended for use with FCoE.
					  </para>
					</note>
        </step>
				<step>
					<para>
						If your logical network definition is not synchronized with the network configuration on the host, select the <guilabel>Sync network</guilabel> check box. A logical network cannot be edited or moved to another interface until it is synchronized.
					</para>
					<note>
						<para>
							Networks are not considered synchronized if they have one of the following conditions:
							<itemizedlist>
								<listitem>
									<para>
										The <guilabel>VM Network</guilabel> is different from the physical host network.
									</para>
								</listitem>
								<listitem>
									<para>
										The VLAN identifier is different from the physical host network.
									</para>
								</listitem>
								<listitem>
									<para>
										A <guilabel>Custom</guilabel> <guilabel>MTU</guilabel> is set on the logical network, and is different from the physical host network.
									</para>
								</listitem>
							</itemizedlist>
						</para>
					</note>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Select the <guilabel>Verify connectivity between Host and Engine</guilabel> check box to check network connectivity; this action will only work if the host is in maintenance mode.
			</para>
		</step>
		<step>
			<para>
				Select the <guilabel>Save network configuration</guilabel> check box to make the changes persistent when the environment is rebooted.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>OK</guibutton>.
			</para>
		</step>
	</procedure>
	<note>
		<para>
			If not all network interface cards for the host are displayed, click the <guilabel>Refresh Capabilities</guilabel> button to update the list of network interface cards available for that host.
		</para>
	</note>
</section>
