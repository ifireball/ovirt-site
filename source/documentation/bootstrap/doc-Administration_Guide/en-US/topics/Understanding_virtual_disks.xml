<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Understanding_virtual_disks" remap="TID_7926">
	<title>Understanding Virtual Disks</title>
	<para>
		Red Hat Virtualization features <guilabel>Preallocated</guilabel> (thick provisioned) and <guilabel>Sparse</guilabel> (thin provisioned) storage options.
	</para>
	<itemizedlist>
		<listitem>
			<para>
				Preallocated
			</para>
			<para>
				A preallocated virtual disk allocates all the storage required for a virtual machine up front. For example, a 20 GB preallocated logical volume created for the data partition of a virtual machine will take up 20 GB of storage space immediately upon creation.
			</para>
		</listitem>
		<listitem>
			<para>
				Sparse
			</para>
			<para>
				A sparse allocation allows an administrator to define the total storage to be assigned to the virtual machine, but the storage is only allocated when required.
			</para>
			<para>
				For example, a 20 GB thin provisioned logical volume would take up 0 GB of storage space when first created. When the operating system is installed it may take up the size of the installed file, and would continue to grow as data is added up to a maximum of 20 GB size.
			</para>
		</listitem>
	</itemizedlist>
	<para>
		The size of a disk is listed in the <guilabel>Disks</guilabel> sub-tab for each virtual machine and template. The <guilabel>Virtual Size</guilabel> of a disk is the total amount of disk space that the virtual machine can use; it is the number that you enter in the <guilabel>Size(GB)</guilabel> field when a disk is created or edited. The <guilabel>Actual Size</guilabel> of a disk is the amount of disk space that has been allocated to the virtual machine so far. Preallocated disks show the same value for both fields. Sparse disks may show a different value in the <guilabel>Actual Size</guilabel> field from the value in the <guilabel>Virtual Size</guilabel> field, depending on how much of the disk space has been allocated.
	</para>
	<note>
		<para>
			When creating a Cinder virtual disk, the format and type of the disk are handled internally by Cinder and are not managed by Red Hat Virtualization.
		</para>
	</note>
	<para>
		The possible combinations of storage types and formats are described in the following table.
	</para>
	<table id="vdisk-combos">
		<title>Permitted Storage Combinations</title>
		<tgroup cols="4">
			<thead>
				<row>
					<entry>
						Storage
					</entry>
					<entry>
						Format
					</entry>
					<entry>
						Type
					</entry>
					<entry>
						Note
					</entry>
				</row>
				<row>
					<entry>
						NFS or iSCSI/FCP
					</entry>
					<entry>
						RAW or QCOW2
					</entry>
					<entry>
						Sparse or Preallocated
					</entry>
					<entry />
				</row>
			</thead>
			<tbody>
				<row>
					<entry>
						NFS
					</entry>
					<entry>
						RAW
					</entry>
					<entry>
						Preallocated
					</entry>
					<entry>
						A file with an initial size which equals the amount of storage defined for the virtual disk, and has no formatting.
					</entry>
				</row>
				<row>
					<entry>
						NFS
					</entry>
					<entry>
						RAW
					</entry>
					<entry>
						Sparse
					</entry>
					<entry>
						A file with an initial size which is close to zero, and has no formatting.
					</entry>
				</row>
				<row>
					<entry>
						NFS
					</entry>
					<entry>
						QCOW2
					</entry>
					<entry>
						Sparse
					</entry>
					<entry>
						A file with an initial size which is close to zero, and has QCOW2 formatting. Subsequent layers will be QCOW2 formatted.
					</entry>
				</row>
				<row>
					<entry>
						SAN
					</entry>
					<entry>
						RAW
					</entry>
					<entry>
						Preallocated
					</entry>
					<entry>
						A block device with an initial size which equals the amount of storage defined for the virtual disk, and has no formatting.
					</entry>
				</row> 
				<!--<row>	
					<entry>
						SAN
					</entry>
					 <entry>
						Qcow2
					</entry>
					<entry>
						Preallocated
					</entry>
					<entry>
						A block device with an initial size which equals the amount of storage defined for the virtual disk, and has Qcow2 formatting.
					</entry> 
				</row> -->
				<row>
					<entry>
						SAN
					</entry>
					<entry>
						QCOW2
					</entry>
					<entry>
						Sparse
					</entry>
					<entry>
						A block device with an initial size which is much smaller than the size defined for the virtual disk (currently 1 GB), and has QCOW2 formatting for which space is allocated as needed (currently in 1 GB increments).
					</entry>
				</row>
			</tbody>
		</tgroup>
	</table>
</section>

