<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Adding_an_OpenStack_Network_Service_Neutron_for_Network_Provisioning">
	<title>Adding an OpenStack Networking (Neutron) Instance for Network Provisioning</title>
	<para>
		Add an OpenStack Networking (Neutron) instance for network provisioning to the Red Hat Virtualization Manager. To add other third-party network providers that implement the OpenStack Neutron REST API, see <xref linkend="Adding_an_External_Network_Provider"/>.
	</para>
	<important>
	  <para>
	    Red Hat Virtualization supports Red Hat OpenStack Platform 8 as an external network provider.
	  </para>
	</important>
	<procedure>
		<title>Adding an OpenStack Networking (Neutron) Instance for Network Provisioning</title>
		<step>
			<para>
				Select the <guilabel>External Providers</guilabel> entry in the tree pane.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>Add</guibutton> to open the <guilabel>Add Provider</guilabel> window.
			</para>
			<figure>
				<title>The Add Provider Window</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/externalNetworkProvider2.png" />
					</imageobject>
					<textobject> 
						<phrase>The Add Provider Window</phrase>
					</textobject>
				</mediaobject>
			</figure>
		</step>
		<step>
			<para>
				Enter a <guilabel>Name</guilabel> and <guilabel>Description</guilabel>.
			</para>
		</step>
		<step>
			<para>
				From the <guilabel>Type</guilabel> list, select <guilabel>OpenStack Networking</guilabel>.
			</para>
		</step>
		<step>
			<para>
				Ensure that <guilabel>Open vSwitch</guilabel> is selected in the <guilabel>Networking Plugin</guilabel> field.
			</para>
		</step>
		<step>
			<para>
				Enter the <acronym>URL</acronym> or fully qualified domain name of the machine on which the OpenStack Networking instance is installed in the <guilabel>Provider URL</guilabel> text field, followed by the port number. The <guilabel>Read-Only</guilabel> check box is selected by default. This prevents users from modifying the OpenStack Networking instance. 
			</para>
        <important><para>You must leave the <guilabel>Read-Only</guilabel> check box selected for your setup to be supported by Red Hat.</para></important>
		</step>
		<step>
			<para>
				Optionally, select the <guilabel>Requires Authentication</guilabel> check box and enter the <guilabel>Username</guilabel>, <guilabel>Password</guilabel>, <guilabel>Tenant Name</guilabel>, and <guilabel>Authentication URL</guilabel> for the OpenStack Networking instance. You must use the user name and password for the OpenStack Networking user registered in Keystone, the tenant of which the OpenStack Networking instance is a member, and the URL and port of the Keystone server.
			</para>
		</step>
		<step>
			<para>
				Test the credentials:
			</para>
			<substeps>
				<step>
					<para>
						Click <guilabel>Test</guilabel> to test whether you can authenticate successfully with the OpenStack Networking instance using the provided credentials.
					</para>
				</step>
				<step>
					<para>
						If the OpenStack Networking instance uses <acronym>SSL</acronym>, the <guilabel>Import provider certificates</guilabel> window opens; click <guilabel>OK</guilabel> to import the certificate that the OpenStack Networking instance provides to ensure the Manager can communicate with the instance.
						</para>
				</step>
			</substeps>
			<warning>
			  <para>
			    The following steps are provided only as a Technology Preview. Red Hat Virtualization only supports preconfigured Neutron hosts.
			  </para>
			</warning>
		</step>
		<step>
			<para>
				Click the <guilabel>Agent Configuration</guilabel> tab.
			</para>
			<figure>
				<title>The Agent Configuration Tab</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/6589.png" />
					</imageobject>
					<textobject> 
						<phrase>The Agent Configuration Tab</phrase>
					</textobject>
				</mediaobject>
			</figure>
		</step>
		<step>
			<para>
				Enter a comma-separated list of interface mappings for the Open vSwitch agent in the <guilabel>Interface Mappings</guilabel> field.
			</para>
		</step>
		<step>
			<para>
				Select the message broker type that the OpenStack Networking instance uses from the <guilabel>Broker Type</guilabel> list.
			</para>
		</step>
		<step>
			<para>
				Enter the <acronym>URL</acronym> or fully qualified domain name of the host on which the message broker is hosted in the <guilabel>Host</guilabel> field.
			</para>
		</step>
		<step>
			<para>
				Enter the <guilabel>Port</guilabel> by which to connect to the message broker. This port number will be 5762 by default if the message broker is not configured to use SSL, and 5761 if it is configured to use SSL.
			</para>
		</step>
		<step>
			<para>
				Enter the <guilabel>Username</guilabel> and <guilabel>Password</guilabel> of the OpenStack Networking user registered in the message broker instance.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>OK</guibutton>.
			</para>
		</step>
	</procedure>
	<para>
		You have added the OpenStack Networking instance to the Red Hat Virtualization Manager. Before you can use the networks it provides, import the networks into the Manager. See <xref linkend="Importing_Networks"/>.
	</para>
</section>

