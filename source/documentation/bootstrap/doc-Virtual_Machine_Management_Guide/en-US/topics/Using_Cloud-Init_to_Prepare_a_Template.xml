<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Virtual_Machine_Management_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Using_Cloud-Init_to_Prepare_a_Template" remap="TID_30183">
	<title>Using Cloud-Init to Prepare a Template</title>
	<para>
		As long as the <package>cloud-init</package> package is installed on a Linux virtual machine, you can use the virtual machine to make a cloud-init enabled template. Specify a set of standard settings to be included in a template as described in the following procedure or, alternatively, skip the Cloud-Init settings steps and configure them when creating a virtual machine based on this template.
	</para>
	<note>
		<para>
			While the following procedure outlines how to use Cloud-Init when preparing a template, the same settings are also available in the <guilabel>New Virtual Machine</guilabel>, <guilabel>Edit Template</guilabel>, and <guilabel>Run Once</guilabel> windows.
		</para>
	</note>
	<procedure>
		<title>Using Cloud-Init to Prepare a Template</title>
		<step>
			<para>
				Click the <guilabel>Virtual Machines</guilabel> tab and select a virtual machine.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>Edit</guibutton>.
			</para>
		</step>
		<step>
			<para>
				Click the <guilabel>Initial Run</guilabel> tab and select the <guilabel>Use Cloud-Init/Sysprep</guilabel> check box.
			</para>
		</step>
		<step>
			<para>
				Enter a host name in the <guilabel>VM Hostname</guilabel> text field.
			</para>
		</step>
		<step>
			<para>
				Select the <guilabel>Configure Time Zone</guilabel> check box and select a time zone from the <guilabel>Time Zone</guilabel> drop-down list.
			</para>
		</step>
		<step>
			<para>
				Expand the <guilabel>Authentication</guilabel> section and select the <guilabel>Use already configured password</guilabel> check box to user the existing credentials, or clear that check box and enter a root password in the <guilabel>Password</guilabel> and <guilabel>Verify Password</guilabel> text fields to specify a new root password.
			</para>
		</step>
		<step>
			<para>
				Enter any <acronym>SSH</acronym> keys to be added to the authorized hosts file on the virtual machine in the <guilabel>SSH Authorized Keys</guilabel> text area.
			</para>
		</step>
		<step>
			<para>
				Select the <guilabel>Regenerate SSH Keys</guilabel> check box to regenerate <acronym>SSH</acronym> keys for the virtual machine.
			</para>
		</step>
		<step>
			<para>
				Expand the <guilabel>Networks</guilabel> section and enter any <acronym>DNS</acronym> servers in the <guilabel>DNS Servers</guilabel> text field.
			</para>
		</step>
		<step>
			<para>
				Enter any <acronym>DNS</acronym> search domains in the <guilabel>DNS Search Domains</guilabel> text field.
			</para>
		</step>
		<step>
			<para>
				Select the <guilabel>Network</guilabel> check box and use the <guibutton>+</guibutton> and <guibutton>-</guibutton> buttons to add or remove network interfaces to or from the virtual machine.
			</para>
		</step>
		<step>
			<para>
				Expand the <guilabel>Custom Script</guilabel> section and enter any custom scripts in the <guilabel>Custom Script</guilabel> text area.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>Ok</guibutton>.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>Make Template</guibutton> and enter the fields as necessary.
			</para>
		</step>
		<step>
			<para>
				Click <guibutton>Ok</guibutton>.
			</para>
		</step>
	</procedure>
	<para>
		You can now provision new virtual machines using this template.
	</para>
</section>